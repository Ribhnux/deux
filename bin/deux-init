#!/usr/bin/env node

const deux = require('../lib')

// Add padding
console.log('')
process.on('exit', function () {
  console.log('')
})

if (!deux.const.WP_CONFIG_PATH) {
  deux.logger.error(deux.messages.ERROR_NOT_WP_FOLDER)
}

deux.prompts.preinit().then(({init}) => {
  if (init === deux.const.PROJECT_STATUS_NEW) {
    deux.prompts.init(init)
      .then(() => {
        deux.logger.done(deux.messages.DONE_FINISH)
      })
  } else {
    deux.prompts.chooseProject()
      .then(project => {
        deux.prompts.init(init, project.selected.themeSlug).then(() => {
          deux.logger.done(deux.messages.DONE_UPDATED)
        })
      })
      .catch(err => {
        deux.logger.error(err)
      })
  }
})
